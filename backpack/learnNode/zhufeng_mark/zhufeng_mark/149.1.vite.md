---
link: null
title: ç å³°æ¶æ„å¸ˆæˆé•¿è®¡åˆ’
description: null
keywords: null
author: null
date: null
publisher: ç å³°æ¶æ„å¸ˆæˆé•¿è®¡åˆ’
stats: paragraph=293 sentences=551, words=3307
---
## 1.è¯¾ç¨‹å¤§çº² [#](#t01è¯¾ç¨‹å¤§çº²)

### 1.1 Vite2+Vue3+Typescript æ­å»ºå¼€å‘ç¯å¢ƒ [#](#t111-vite2vue3typescript-æ­å»ºå¼€å‘ç¯å¢ƒ)

* å®‰è£…ä½¿ç”¨vite2
* æ”¯æŒvue3
* æ”¯æŒtypescript
* æ”¯æŒeslintã€prettierå’Œeditorconfig
* git hooks
* åˆ«å
* æ ·å¼
* é™æ€èµ„æº
* mock
* axiosè¯·æ±‚å°è£…
* piniaçŠ¶æ€ç®¡ç†
* è·¯ç”±
* NaÃ¯veUIç»„ä»¶åº“
* ç¯å¢ƒå˜é‡å’Œæ¨¡å¼

### 1.2 rollupå’Œvite2æ’ä»¶ç³»ç»Ÿå’Œè‡ªå®šä¹‰æ’ä»¶ [#](#t212-rollupå’Œvite2æ’ä»¶ç³»ç»Ÿå’Œè‡ªå®šä¹‰æ’ä»¶)

### 1.3 ä»é›¶å®ç°vite2 [#](#t313-ä»é›¶å®ç°vite2)

## 2.å®‰è£… vite [#](#t42å®‰è£…-vite)

### 2.1 vite ä»‹ç» [#](#t521-vite-ä»‹ç»)

* Vite (æ³•è¯­æ„ä¸º "å¿«é€Ÿçš„"ï¼Œå‘éŸ³ /vit/) æ˜¯ä¸‹ä¸€ä»£å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…·
* ğŸ’¡ æé€Ÿçš„æœåŠ¡å¯åŠ¨ ä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…!

* âš¡ï¸ è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ æ— è®ºåº”ç”¨ç¨‹åºå¤§å°å¦‚ä½•ï¼Œéƒ½å§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰
* ğŸ› ï¸ ä¸°å¯Œçš„åŠŸèƒ½ å¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚
* ğŸ“¦ ä¼˜åŒ–çš„æ„å»º å¯é€‰ "å¤šé¡µåº”ç”¨" æˆ– "åº“" æ¨¡å¼çš„é¢„é…ç½® Rollup æ„å»º
* ğŸ”© é€šç”¨çš„æ’ä»¶ åœ¨å¼€å‘å’Œæ„å»ºä¹‹é—´å…±äº« Rollup-superset æ’ä»¶æ¥å£ã€‚
* ğŸ”‘ å®Œå…¨ç±»å‹åŒ–çš„ API çµæ´»çš„ API å’Œå®Œæ•´ TypeScript

### 2.2 vite å®‰è£… [#](#t622-vite-å®‰è£…)

* [pnpm](https://pnpm.io/)
* [https://vitejs.dev/config](https://vitejs.dev/config)

```js
pnpm install vite -D
```

## 3.å¯åŠ¨ vite [#](#t73å¯åŠ¨-vite)

* [https://esbuild.github.io](https://esbuild.github.io)
* Vite ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆ
  - ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œå®ƒåŸºäº åŸç”Ÿ ES æ¨¡å— æä¾›äº† ä¸°å¯Œçš„å†…å»ºåŠŸèƒ½ï¼Œå¦‚é€Ÿåº¦å¿«åˆ°æƒŠäººçš„ æ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰,Vite å°†ä¼šä½¿ç”¨ `esbuild` é¢„æ„å»ºä¾èµ–ã€‚ `Esbuild` ä½¿ç”¨ `Go` ç¼–å†™ï¼Œå¹¶ä¸”æ¯”ä»¥ JavaScript ç¼–å†™çš„æ‰“åŒ…å™¨é¢„æ„å»ºä¾èµ–å¿« 10-100 å€
  - ä¸€å¥—æ„å»ºæŒ‡ä»¤ï¼Œå®ƒä½¿ç”¨ Rollup æ‰“åŒ…ä½ çš„ä»£ç ï¼Œå¹¶ä¸”å®ƒæ˜¯é¢„é…ç½®çš„ï¼Œå¯è¾“å‡ºç”¨äºç”Ÿäº§ç¯å¢ƒçš„é«˜åº¦ä¼˜åŒ–è¿‡çš„é™æ€èµ„æº

![](https://static.zhufengpeixun.com/websocket_1645812565010.png) ![](https://static.zhufengpeixun.com/validtejs_1645813926867.png)

### 3.1 package.json [#](#t831-packagejson)

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build"
  }
}
```

### 3.2 vite.config.js [#](#t932-viteconfigjs)

```js
import { defineConfig } from "vite"
export default defineConfig({})
```

### 3.3 index.html [#](#t1033-indexhtml)

index.html

```html

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite Apptitle>
  head>

  <body>
    <div id="app">div>
    <script type="module" src="/src/main.ts">script>
  body>
html>
```

### 3.4 src\env.d.ts [#](#t1134-srcenvdts)

* Vite é»˜è®¤çš„ç±»å‹å®šä¹‰æ˜¯å†™ç»™å®ƒçš„ Node.js API çš„,è¦å°†å…¶è¡¥å……åˆ°ä¸€ä¸ª Vite åº”ç”¨çš„å®¢æˆ·ç«¯ä»£ç ç¯å¢ƒä¸­
* [å®¢æˆ·ç«¯ç±»å‹](https://vitejs.cn/guide/features.html#typescript-compiler-options)
* å¦‚æœä½ çš„åº“ä¾èµ–äºæŸä¸ªå…¨å±€åº“
  - ä½¿ç”¨ `///` æŒ‡ä»¤
  - ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶çš„æœ€é¡¶ç«¯
  - ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–çš„æ–‡ä»¶

### 3.5 src\main.ts [#](#t1235-srcmaints)

src\main.ts

```js
export function render() {
  document.getElementById("app")!.innerHTML = "main";
}
render();

if (import.meta.hot) {
  import.meta.hot.accept((updatedModule) => updatedModule.render());
}

```

### 3.6 tsconfig.json [#](#t1336-tsconfigjson)

tsconfig.json

```json
{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "preserve",
    "sourceMap": true,
    "esModuleInterop": true,
    "lib": ["esnext", "dom", "es2018.promise"]
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

å‚æ•° è§£é‡Š target ç”¨äºæŒ‡å®šç¼–è¯‘ä¹‹åçš„ç‰ˆæœ¬ç›®æ ‡ module ç”Ÿæˆçš„æ¨¡å—å½¢å¼ï¼šnoneã€commonjsã€amdã€systemã€umdã€es6ã€es2015 æˆ– esnext åªæœ‰ amd å’Œ system èƒ½å’Œ outFile ä¸€èµ·ä½¿ç”¨ target ä¸º es5 æˆ–æ›´ä½æ—¶å¯ç”¨ es6 å’Œ es2015 moduleResolution é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼Œæœ‰ node å’Œ classic ä¸¤ç§ç±»å‹
[module-resolution](https://www.typescriptlang.org/docs/handbook/module-resolution.html)

strict æ˜¯å¦å¯åŠ¨æ‰€æœ‰ç±»å‹æ£€æŸ¥ jsx react æ¨¡å¼ä¼šç”Ÿæˆ React.createElementï¼Œåœ¨ä½¿ç”¨å‰ä¸éœ€è¦å†è¿›è¡Œè½¬æ¢æ“ä½œäº†ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åä¸º.js sourceMap æŠŠ ts æ–‡ä»¶ç¼–è¯‘æˆ js æ–‡ä»¶çš„æ—¶å€™ï¼ŒåŒæ—¶ç”Ÿæˆå¯¹åº”çš„ sourceMap æ–‡ä»¶ esModuleInterop ä¸ºå¯¼å…¥å†…å®¹åˆ›å»ºå‘½åç©ºé—´,å®ç° CommonJS å’Œ ES æ¨¡å—ä¹‹é—´çš„äº’ç›¸è®¿é—® lib ç¼–è¯‘æ—¶å¼•å…¥çš„ ES åŠŸèƒ½åº“ï¼ŒåŒ…æ‹¬ï¼šes5 ã€es6ã€es7ã€dom ç­‰ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸ºï¼š target ä¸º es5 æ—¶: ["dom", "es5", "scripthost"] target ä¸º es6 æ—¶: ["dom", "es6", "dom.iterable", "scripthost"] include include ä¹Ÿå¯ä»¥æŒ‡å®šè¦ç¼–è¯‘çš„è·¯å¾„åˆ—è¡¨ï¼Œä½†æ˜¯å’Œ files çš„åŒºåˆ«åœ¨äºï¼Œè¿™é‡Œçš„è·¯å¾„å¯ä»¥æ˜¯æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶

### 3.7 .gitignore [#](#t1437-gitignore)

.gitignore

```js
node_modules
pnpm-debug.log*
.vscode
```

## 4.æ”¯æŒ vue3 [#](#t154æ”¯æŒ-vue3)

### 4.1 å®‰è£… vue [#](#t1641-å®‰è£…-vue)

```js
pnpm install vue
pnpm install @vitejs/plugin-vue -D
```

### 4.2 vite.config.ts [#](#t1742-viteconfigts)

vite.config.ts

```diff
import { defineConfig } from 'vite'
+import vue from "@vitejs/plugin-vue";
export default defineConfig({
+ plugins: [vue()]
})
```

### 4.3 src\env.d.ts [#](#t1843-srcenvdts)

src\env.d.ts

```diff
///
+declare module "*.vue" {
+  import type { DefineComponent } from "vue";
+  const component: DefineComponent;
+  export default component;
+}
```

### 4.4 src\main.ts [#](#t1944-srcmaints)

src\main.ts

```diff
+import { createApp } from "vue";
+import App from "./App.vue";
+const app = createApp(App)
+app.mount("#app");
```

### 4.5 src\App.vue [#](#t2045-srcappvue)

src\App.vue

```js

import HelloWorld from './components/HelloWorld.vue'

```

### 4.6 HelloWorld.vue [#](#t2146-helloworldvue)

src\components\HelloWorld.vue

* [å•æ–‡ä»¶ç»„ä»¶ `<script setup></code></a>æ˜¯åœ¨å•æ–‡ä»¶ç»„ä»¶ (SFC) ä¸­ä½¿ç”¨ç»„åˆå¼ API çš„ç¼–è¯‘æ—¶è¯­æ³•ç³–</li><li><a href="https://v3.cn.vuejs.org/api/sfc-spec.html#%E9%A2%84%E5%A4%84%E7%90%86">lang</a>å±æ€§å¯ä»¥å£°æ˜é¢„å¤„ç†è¯­è¨€</li><li><a href="https://v3.cn.vuejs.org/api/refs-api.html#ref"><code>ref</code></a>æ¥å—ä¸€ä¸ªå†…éƒ¨å€¼å¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯å˜çš„ ref å¯¹è±¡ã€‚ref å¯¹è±¡ä»…æœ‰ä¸€ä¸ª <code>.value</code> å±æ€§ï¼ŒæŒ‡å‘è¯¥å†…éƒ¨å€¼,åœ¨ JS ä¸­æ“ä½œæ•°æ®éœ€è¦<code>.value</code>,åœ¨æ¨¡æ¿ä¸­è¯»å–ä¸éœ€è¦<code>.value</code></li><li>åœ¨ <code><script setup></code> ä¸­å¿…é¡»ä½¿ç”¨ <a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineprops-%E5%92%8C-defineemits">defineProps</a> API æ¥å£°æ˜ propsï¼Œåªåœ¨ <code><script setup></code> ä¸­æ‰èƒ½ä½¿ç”¨çš„ç¼–è¯‘å™¨å®ã€‚ä»–ä»¬ä¸éœ€è¦å¯¼å…¥ä¸”ä¼šéšç€ <code><script setup></code> å¤„ç†è¿‡ç¨‹ä¸€åŒè¢«ç¼–è¯‘æ‰</li></ul><pre><code class="lang-js"><script setup lang="ts">
import { ref } from 'vue'
import logoUrl from '../assets/logo.png'
defineProps<{ msg: string }>()
const count = ref(0)
</script>

<template>
  <h1>{{ msg }}</h1>
  <img :src="logoUrl">
  <div>
    <button type="button" @click="count++">count is: {{ count }}</button>
  </div>
</template>

<style scoped>
img {
  width: 100px;
  height: 100px;
}
</style>
`**5.æ”¯æŒ typescript [#](#t225æ”¯æŒ-typescript)**
  - åªç¼–è¯‘ä¸æ ¡éªŒ**5.1 å®‰è£…[#](#t2351-å®‰è£…)**
  - [typescript](https://www.npmjs.com/package/typescript)æ˜¯ä¸€ç§åŸºäº JavaScript çš„å¼ºç±»å‹ç¼–ç¨‹è¯­è¨€
  - [vue-tsc](https://www.npmjs.com/package/vue-tsc)å¯ä»¥å¯¹ Vue3 è¿›è¡Œ Typescript ç±»å‹è¾ƒéªŒ

```js
pnpm install typescript vue-tsc  -D
```

**5.2 package.json [#](#t2452-packagejson)**package.json

```diff
{
  "scripts": {
    "dev": "vite",
+   "build": "vue-tsc --noEmit && vite build"
  },
}
```

**5.3 msg.ts [#](#t2553-msgts)** src\msg.ts

```js
interface Msg {
  text: string;
}
const msg: Msg = {
  text: "zhufeng",
  age: 13
}

export default msg
```

**5.4 App.vue [#](#t2654-appvue)** src\App.vue

```diff

import HelloWorld from './components/HelloWorld.vue'
<span class="hljs-addition">+import msg from "./msg"</span>

+

```

**6.ESLint [#](#t276eslint)**
  - ESLint [eslint](https://eslint.bootcss.com/) æ˜¯ä¸€ä¸ªæ’ä»¶åŒ–å¹¶ä¸”å¯é…ç½®çš„ JavaScript è¯­æ³•è§„åˆ™å’Œä»£ç é£æ ¼çš„æ£€æŸ¥å·¥å…·
    + ä»£ç è´¨é‡é—®é¢˜ï¼šä½¿ç”¨æ–¹å¼æœ‰å¯èƒ½æœ‰é—®é¢˜
    + ä»£ç é£æ ¼é—®é¢˜ï¼šé£æ ¼ä¸ç¬¦åˆä¸€å®šè§„åˆ™**6.1 å®‰è£…[#](#t2861-å®‰è£…)**

```js
pnpm install eslint eslint-plugin-vue  @typescript-eslint/parser @typescript-eslint/eslint-plugin @vue/eslint-config-typescript   -D
```

åç§° è¯´æ˜ eslint ESLint æ˜¯ä¸€ä¸ªç”¨äºè¯†åˆ«å’ŒæŠ¥å‘Šåœ¨ ECMAScript/JavaScript ä»£ç ä¸­å‘ç°çš„æ¨¡å¼çš„å·¥å…· eslint-plugin-vue Vue çš„å®˜æ–¹ ESLint æ’ä»¶ @typescript-eslint/parser ä¸€ä¸ª ESLint è§£æå™¨ï¼Œå®ƒåˆ©ç”¨ TypeScript-ESTree å…è®¸ ESLint æ£€æŸ¥ TypeScript æºä»£ç  @typescript-eslint/eslint-plugin ä¸€ä¸ª ESLint æ’ä»¶ï¼Œä¸º TypeScript ä»£ç åº“æä¾› lint è§„åˆ™ @vue/eslint-config-typescript Vue çš„ eslint-config-typescript **6.2 .eslintrc.js [#](#t2962-eslintrcjs)** .eslintrc.js

```js
module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true
  },

  extends: [
    "plugin:vue/vue3-recommended",
    "eslint:recommended",
    "@vue/typescript/recommended"
  ],
  parserOptions: {
    parser: "@typescript-eslint/parser",
    ecmaVersion: 2021
  },
  rules: {
    "no-unused-vars": "off",
    "vue/no-unused-vars": "off",
    "@typescript-eslint/no-unused-vars": "off"
  },
  globals: {
    defineProps: "readonly"
  }
}
```

**6.3 .eslintignore [#](#t3063-eslintignore)** .eslintignore

```js
node_modules
dist
*.css
*.jpg
*.jpeg
*.png
*.gif
*.d.ts
```

**6.4 package.json [#](#t3164-packagejson)** package.json

```diff
{
    "scripts": {
     "dev": "vite",
     "build": "vue-tsc --noEmit && vite build",
+    "lint": "eslint --ext .ts,.tsx,vue src/** --no-error-on-unmatched-pattern --quiet",
+    "lint:fix": "eslint --ext .ts,.tsx,vue src/** --no-error-on-unmatched-pattern --quiet --fix"
  },
}
```

**7.Prettier [#](#t327prettier)**
  - ESLint ä¸»è¦è§£å†³çš„æ˜¯ä»£ç è´¨é‡é—®é¢˜
  - [ä»£ç è´¨é‡è§„åˆ™](https://eslint.bootcss.com/docs/rules/)
    + no-unused-vars ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„å˜é‡
    + no-implicit-globals ç¦æ­¢åœ¨å…¨å±€èŒƒå›´å†…ä½¿ç”¨å˜é‡å£°æ˜å’Œ function å£°æ˜
    + prefer-promise-reject-errors è¦æ±‚ä½¿ç”¨ Error å¯¹è±¡ä½œä¸º Promise æ‹’ç»çš„åŸå› 
  - [prettier](https://prettier.io/)ä¸»è¦è§£å†³çš„æ˜¯ä»£ç é£æ ¼é—®é¢˜
    + max-len æœ€å¤§é•¿åº¦
    + no-mixed-spaces-and-tabs ä¸å…è®¸ç©ºæ ¼å’Œ tab æ··åˆ
    + keyword-spacing å…³é”®å­—çš„ç©º
    + comma-style å†’å·é£æ ¼**7.1 å®‰è£…[#](#t3371-å®‰è£…)**

```js
pnpm install prettier eslint-plugin-prettier  @vue/eslint-config-prettier -D
```

åç§° è¯´æ˜ prettier ä»£ç æ ¼å¼åŒ– eslint-plugin-prettier ä½œä¸º ESLint è§„åˆ™è¿è¡Œå¾— prettier @vue/eslint-config-prettier Vue çš„ eslint-config-prettier **7.2 .eslintrc.js [#](#t3472-eslintrcjs)** .eslintrc.js

```diff
module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true
  },

  extends: [
    "plugin:vue/vue3-recommended",
    "eslint:recommended",
    "@vue/typescript/recommended",
+   "prettier",
+   "@vue/eslint-config-prettier"
  ],
  parserOptions: {
    parser: "@typescript-eslint/parser",
    ecmaVersion: 2021
  },
  rules: {
+   "prettier/prettier": [
+     "error",
+     {
+       singleQuote: false,
+       tabWidth: 2,
+       indent: 2,
+       semi: false,
+       trailingComma: "none",
+       endOfLine: "auto"
+     }
+   ],
+   "no-unused-vars": "off",
+   "vue/no-unused-vars": "off",
+   "@typescript-eslint/no-unused-vars": "off"
+ },
  globals: {
    defineProps: "readonly"
  }
}

```

**7.3 .prettierrc.js [#](#t3573-prettierrcjs)** .prettierrc.js

```js
module.exports = {
  singleQuote: false,
  semi: false,
  tabWidth: 2,
  trailingComma: "none",
  useTabs: false,
  endOfLine: "auto"
}
```

**7.4 .prettierignore [#](#t3674-prettierignore)** .prettierignore

```js
node_modules
dist
```

**7.5 editorconfig [#](#t3775-editorconfig)**
  - [editorconfig](https://editorconfig.org/)å¸®åŠ©å¼€å‘äººå‘˜åœ¨ä¸åŒçš„ç¼–è¾‘å™¨å’Œ IDE ä¹‹é—´å®šä¹‰å’Œç»´æŠ¤ä¸€è‡´çš„ç¼–ç æ ·å¼
  - ä¸åŒçš„å¼€å‘äººå‘˜ï¼Œä¸åŒçš„ç¼–è¾‘å™¨ï¼Œæœ‰ä¸åŒçš„ç¼–ç é£æ ¼ï¼Œè€Œ EditorConfig å°±æ˜¯ç”¨æ¥ååŒå›¢é˜Ÿå¼€å‘äººå‘˜ä¹‹é—´çš„ä»£ç çš„é£æ ¼åŠæ ·å¼è§„èŒƒåŒ–çš„ä¸€ä¸ªå·¥å…·ï¼Œè€Œ.editorconfig æ­£æ˜¯å®ƒçš„é»˜è®¤é…ç½®æ–‡ä»¶
  - [EditorConfig](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig)
  - vscode è¿™ç±»ç¼–è¾‘å™¨ï¼Œéœ€è¦è‡ªè¡Œå®‰è£… editorconfig æ’ä»¶**7.5.1 .editorconfig [#](#t38751-editorconfig)**
  - Unix ç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾åªæœ‰æ¢è¡Œ,å³ `\n` LF(Line Feed)
  - Windows ç³»ç»Ÿé‡Œé¢ï¼Œæ¯è¡Œç»“å°¾æ˜¯ `&#x6362;&#x884C; &#x56DE;&#x8F66;`ï¼Œå³ `\r\n` CR/LF
  - Mac ç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `&#x56DE;&#x8F66;`ï¼Œå³ `\r` CR(Carriage Return)

```js
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
end_of_line = lf
```

**7.6 è‡ªåŠ¨æ ¼å¼åŒ–[#](#t3976-è‡ªåŠ¨æ ¼å¼åŒ–)** ![](https://static.zhufengpeixun.com/formatonsave_1645855381499.png) ![](https://static.zhufengpeixun.com/formatter_1645855386534.png)**8.git hooks [#](#t408git-hooks)**
  - å¯ä»¥åœ¨ `git commit`ä¹‹å‰æ£€æŸ¥ä»£ç ï¼Œä¿è¯æ‰€æœ‰æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­çš„ä»£ç éƒ½æ˜¯ç¬¦åˆè§„èŒƒçš„
  - å¯ä»¥åœ¨ `git push`ä¹‹å‰æ‰§è¡Œå•å…ƒæµ‹è¯•,ä¿è¯æ‰€æœ‰çš„æäº¤çš„ä»£ç ç»è¿‡çš„å•å…ƒæµ‹è¯•
  - [husky](https://typicode.github.io/husky)å¯ä»¥è®©æˆ‘ä»¬å‘é¡¹ç›®ä¸­æ–¹ä¾¿æ·»åŠ  `git hooks`,å®ƒä¼šè‡ªåŠ¨åœ¨ä»“åº“ä¸­çš„ `.git/` ç›®å½•ä¸‹å¢åŠ ç›¸åº”çš„é’©å­,æ¯”å¦‚ `pre-commit` é’©å­å°±ä¼šåœ¨ä½ æ‰§è¡Œ `git commit`å‘½ä»¤çš„æ—¶å€™çš„è§¦å‘
  - [lint-staged](https://www.npmjs.com/package/lint-staged)ç”¨äºå®ç°æ¯æ¬¡æäº¤åªæ£€æŸ¥æœ¬æ¬¡æäº¤æ‰€ä¿®æ”¹çš„æ–‡ä»¶
  - [mrm](https://www.npmjs.com/package/mrm)å¯ä»¥æ ¹æ® `package.json`ä¾èµ–é¡¹ä¸­çš„ä»£ç è´¨é‡å·¥å…·æ¥å®‰è£…å’Œé…ç½® `husky` å’Œ `lint-staged`
  - Commitlint å¯ä»¥è§„èŒƒ `git commit -m ""`ä¸­çš„æè¿°ä¿¡æ¯**8.1 lint-staged [#](#t4181-lint-staged)****8.1.1 å®‰è£…[#](#t42811-å®‰è£…)**
  - `mrm`å®‰è£… `lint-staged`çš„åŒæ—¶ä¼šå®‰è£… `husky`

```js
pnpm install mrm  -D
npx mrm lint-staged
```

**8.1.2 package.json [#](#t43812-packagejson)** package.json

```diff
{
  "name": "vite2vue3ts-prepare",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc --noEmit && vite build",
    "lint": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --quiet",
    "lint:fix": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --fix",
+   "prepare": "husky install"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "vue": "^3.2.31"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.1",
    "@typescript-eslint/parser": "^5.12.1",
    "@vitejs/plugin-vue": "^2.2.2",
    "@vue/eslint-config-prettier": "^7.0.0",
    "@vue/eslint-config-typescript": "^10.0.0",
    "eslint": "^8.10.0",
    "eslint-plugin-prettier": "^4.0.0",
    "eslint-plugin-vue": "^8.5.0",
+   "husky": "^7.0.0",
+   "lint-staged": "^12.3.4",
+   "mrm": "^3.0.10",
    "prettier": "^2.5.1",
    "typescript": "^4.5.5",
    "vite": "^2.8.4",
    "vue-tsc": "^0.32.0"
  },
+ "lint-staged": {
+   "*.{ts,vue}": "eslint --cache --fix"
+ }
}
```

**8.2 commitlint [#](#t4482-commitlint)**
  - [commitlint](https://www.npmjs.com/package/@commitlint/cli)æ¨èæˆ‘ä»¬ä½¿ç”¨[onfig-conventional](https://www.npmjs.com/package/@commitlint/config-conventional)é…ç½®å»å†™ `commit`
  - æäº¤æ ¼å¼ `git commit -m <type>[optional scope]: <description></description></type>`
    + `type` ï¼šç”¨äºè¡¨æ˜æˆ‘ä»¬è¿™æ¬¡æäº¤çš„æ”¹åŠ¨ç±»å‹ï¼Œæ˜¯æ–°å¢äº†åŠŸèƒ½ï¼Ÿè¿˜æ˜¯ä¿®æ”¹äº†æµ‹è¯•ä»£ç ï¼Ÿåˆæˆ–è€…æ˜¯æ›´æ–°äº†æ–‡æ¡£ï¼Ÿ
    + `optional scope`ï¼šä¸€ä¸ªå¯é€‰çš„ä¿®æ”¹èŒƒå›´ã€‚ç”¨äºæ ‡è¯†æ­¤æ¬¡æäº¤ä¸»è¦æ¶‰åŠåˆ°ä»£ç ä¸­å“ªä¸ªæ¨¡å—
    + `description`ï¼šä¸€å¥è¯æè¿°æ­¤æ¬¡æäº¤çš„ä¸»è¦å†…å®¹ï¼Œåšåˆ°è¨€ç®€æ„èµ…**8.2.1 type [#](#t45821-type)** ç±»å‹ æè¿° build ç¼–è¯‘ç›¸å…³çš„ä¿®æ”¹ï¼Œä¾‹å¦‚å‘å¸ƒç‰ˆæœ¬ã€å¯¹é¡¹ç›®æ„å»ºæˆ–è€…ä¾èµ–çš„æ”¹åŠ¨ chore å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰ ci æŒç»­é›†æˆä¿®æ”¹ docs æ–‡æ¡£ä¿®æ”¹ feature æ–°ç‰¹æ€§ã€æ–°åŠŸèƒ½ fix ä¿®æ”¹ bug perf ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ refactor ä»£ç é‡æ„ revert å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ style ä»£ç æ ¼å¼ä¿®æ”¹ test æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹**8.2.2 å®‰è£…[#](#t46822-å®‰è£…)**

```js
pnpm install @commitlint/cli @commitlint/config-conventional -D
```

**8.2.3 é…ç½®[#](#t47823-é…ç½®)**

```js
npx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"
```

**8.2.4 commitlint.config.js [#](#t48824-commitlintconfigjs)**

```js
module.exports = {
  extends: ["@commitlint/config-conventional"],
  rules: {
    "type-enum": [
      2,
      "always",
      [
        "build",
        "chore",
        "ci",
        "docs",
        "feature",
        "fix",
        "perf",
        "refactor",
        "revert",
        "style",
        "test"
      ]
    ]
  }
}
```

**9.é…ç½®åˆ«å[#](#t499é…ç½®åˆ«å)****9.1 vite.config.ts [#](#t5091-viteconfigts)**

```diff
import { defineConfig } from "vite"
+import { resolve } from "path"
import vue from "@vitejs/plugin-vue"
export default defineConfig({
+ resolve: {
+   alias: {
+     "@": resolve("src")
+   }
+ },
  plugins: [vue()]
})

```

**9.2 tsconfig.json [#](#t5192-tsconfigjson)** tsconfig.json

```diff
{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "preserve",
    "sourceMap": true,
    "esModuleInterop": true,
    "lib": ["esnext", "dom", "es2018.promise"],
+   "baseUrl": ".",
+   "paths": {
+     "@/*": ["src/*"]
+   }
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

**9.3 App.vue [#](#t5293-appvue)** src\App.vue

```diff

<span class="hljs-addition">+import HelloWorld from "@/components/HelloWorld.vue"</span>
import msg from "./msg"

```

**10.æ ·å¼å¤„ç†[#](#t5310æ ·å¼å¤„ç†)****10.1 å…¨å±€æ ·å¼[#](#t54101-å…¨å±€æ ·å¼)****10.1.1 src\global.css [#](#t551011-srcglobalcss)**

```css
#app {
  background-color: lightgrey;
}
```

**10.1.2 src\main.ts [#](#t561012-srcmaints)** src\main.ts

```diff
import { createApp } from "vue"
import App from "./App.vue"
+import "./global.css"
const app = createApp(App)
app.mount("#app")
```

**10.2 å±€éƒ¨æ ·å¼[#](#t57102-å±€éƒ¨æ ·å¼)**
  - å½“ `style`æ ‡ç­¾æœ‰ `scoped` å±æ€§æ—¶ï¼Œå®ƒçš„ `CSS` åªä½œç”¨äºå½“å‰ç»„ä»¶ä¸­çš„å…ƒç´ 
  - å®ƒä½¿ç”¨äº† `data-v-hash` çš„æ–¹å¼æ¥ä½¿ css æœ‰äº†å®ƒå¯¹åº”æ¨¡å—çš„æ ‡è¯†**10.2.1 HelloWorld.vue [#](#t581021-helloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
defineProps<{ msg: string }>()
const count = ref(0)

  {{ msg }}

    count is: {{ count }}

+ è¶…é“¾æ¥

img {
  width: 100px;
  height: 100px;
}
<span class="hljs-addition">+a {</span>
<span class="hljs-addition">+  color: red;</span>
<span class="hljs-addition">+}</span>

```

**10.3 CSS Modules [#](#t59103-css-modules)**
  - é€šè¿‡ `module` ä½œç”¨çš„ `style` éƒ½è¢«ä¿å­˜åˆ° `$style` å¯¹è±¡ä¸­**10.3.1 å†…è”[#](#t601031-å†…è”)****10.3.1.1 HelloWorld.vue [#](#t6110311-helloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
defineProps<{ msg: string }>()
const count = ref(0)

  {{ msg }}

    count is: {{ count }}

+ è¶…é“¾æ¥

img {
  width: 100px;
  height: 100px;
}

+</span>
<span class="hljs-addition">+.link {</span>
<span class="hljs-addition">+  color: red;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+

```

**10.3.2 å¤–è”[#](#t621032-å¤–è”)**
  - ä»»ä½•ä»¥ `.module.css` ä¸ºåç¼€åçš„ CSS æ–‡ä»¶éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª `CSS modules` æ–‡ä»¶
  - å¯¼å…¥è¿™æ ·çš„æ–‡ä»¶ä¼šè¿”å›ä¸€ä¸ªç›¸åº”çš„æ¨¡å—å¯¹è±¡**10.3.2.1 HelloWorld.module.css [#](#t6310321-helloworldmodulecss)** src\components\HelloWorld.module.css

```js
.link {
    color: red;
}
```

**10.3.2.2 HelloWorld.vue [#](#t6410322-helloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
<span class="hljs-addition">+import style from "./HelloWorld.module.css"</span>
defineProps<{ msg: string }>()
const count = ref(0)

  {{ msg }}

    count is: {{ count }}

+ è¶…é“¾æ¥

img {
  width: 100px;
  height: 100px;
}

-</span>
<span class="hljs-deletion">-.link {</span>
<span class="hljs-deletion">-  color: red;</span>
<span class="hljs-deletion">-}</span>
<span class="hljs-deletion">-

```

**10.4 é¢„å¤„ç†å™¨[#](#t65104-é¢„å¤„ç†å™¨)**
  - Vite ä¹ŸåŒæ—¶æä¾›äº†å¯¹[.scss, .sass, .less, .styl å’Œ stylus](https://cn.vitejs.dev/guide/features.html#css-pre-processors)æ–‡ä»¶çš„å†…ç½®æ”¯æŒ
  - æ²¡æœ‰å¿…è¦ä¸ºå®ƒä»¬å®‰è£…ç‰¹å®šçš„ Vite æ’ä»¶ï¼Œä½†å¿…é¡»å®‰è£…ç›¸åº”çš„é¢„å¤„ç†å™¨ä¾èµ–
  - `Vite`ä¸º `Sass`å’Œ `Less`æ”¹è¿›äº† `@import`è§£æï¼Œä»¥ä¿è¯ `Vite`åˆ«åä¹Ÿèƒ½è¢«ä½¿ç”¨**10.4.1 å®‰è£…[#](#t661041-å®‰è£…)**

```js
pnpm install sass less -D
```

**10.4.2 src\components\HelloWorld.vue [#](#t671042-srccomponentshelloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
import style from "./HelloWorld.module.css"
defineProps<{ msg: string }>()
const count = ref(0)

  {{ msg }}

    count is: {{ count }}

  è¶…é“¾æ¥
  less
  sass

img {
  width: 100px;
  height: 100px;
}

.link {
  color: red;
}

+</span>
<span class="hljs-addition">+@color: red;</span>
<span class="hljs-addition">+h2 {</span>
<span class="hljs-addition">+  color: @color;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+
+</span>
<span class="hljs-addition">+$color: green;</span>
<span class="hljs-addition">+h3 {</span>
<span class="hljs-addition">+  color: $color;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+
```

**10.5 å…¨å±€æ³¨å…¥[#](#t68105-å…¨å±€æ³¨å…¥)**
  - å¯ä»¥æŠŠå…¨å±€æ ·å¼æ–‡ä»¶å…¨å±€æ³¨å…¥åˆ°é¡¹ç›®ä¸­**10.5.1 vite.config.ts [#](#t691051-viteconfigts)** vite.config.ts

```diff
import { defineConfig } from "vite"
import { resolve } from "path"
import vue from "@vitejs/plugin-vue"
export default defineConfig({
  resolve: {
    alias: {
      "@": resolve("src")
    }
  },
  plugins: [vue()],
+ css: {
+   preprocessorOptions: {
+     scss: {
+       additionalData: '@import "@/styles/theme.scss";'
+     },
+     less: {
+       additionalData: '@import "@/styles/theme.less";'
+     }
+   }
+ }
})

```

**10.5.2 src\styles\theme.less [#](#t701052-srcstylesthemeless)** src\styles\theme.less

```diff
@color: red;
```

**10.5.3 src\styles\theme.scss [#](#t711053-srcstylesthemescss)** src\styles\theme.scss

```diff
$color: green;
```

**10.5.4 src\components\HelloWorld.vue [#](#t721054-srccomponentshelloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
import style from "./HelloWorld.module.css"
defineProps<{ msg: string }>()
const count = ref(0)

  {{ msg }}

    count is: {{ count }}

  è¶…é“¾æ¥
  less
  sass

img {
  width: 100px;
  height: 100px;
}

.link {
  color: red;
}

<span class="hljs-deletion">-@color: red;</span>
h2 {
  color: @color;
}

<span class="hljs-deletion">-$color: green;</span>
h3 {
  color: $color;
}

```

**10.6 PostCSS [#](#t73106-postcss)**
  - ä¸ºäº†æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¿…é¡»åŠ å…¥-webkit,-ms,-o,-moz è¿™äº›å‰ç¼€
    + Trident å†…æ ¸ï¼šä¸»è¦ä»£è¡¨ä¸º IE æµè§ˆå™¨, å‰ç¼€ä¸º-ms
    + Gecko å†…æ ¸ï¼šä¸»è¦ä»£è¡¨ä¸º Firefox, å‰ç¼€ä¸º-moz
    + Presto å†…æ ¸ï¼šä¸»è¦ä»£è¡¨ä¸º Opera, å‰ç¼€ä¸º-o
    + Webkit å†…æ ¸ï¼šäº§è¦ä»£è¡¨ä¸º Chrome å’Œ Safari, å‰ç¼€ä¸º-webkit
  - å¦‚æœé¡¹ç›®åŒ…å«æœ‰æ•ˆçš„ PostCSS é…ç½®ï¼Œå®ƒå°†ä¼šè‡ªåŠ¨åº”ç”¨äºæ‰€æœ‰å·²å¯¼å…¥çš„ CSS **10.6.1 å®‰è£…[#](#t741061-å®‰è£…)**

```js
pnpm install autoprefixer  -D
```

**10.6.2 postcss.config.js [#](#t751062-postcssconfigjs)** postcss.config.js

```js
module.exports = {
  plugins: [require("autoprefixer")]
}
```

**10.6.3 .browserslistrc [#](#t761063-browserslistrc)** .browserslistrc

```js
>0.2%
not dead
not op_mini all
```

**10.6.4 HelloWorld.vue [#](#t771064-helloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
import style from "./HelloWorld.module.css"
defineProps<{ msg: string }>()
const count = ref(0)

  {{ msg }}

    count is: {{ count }}

  è¶…é“¾æ¥
  less
  sass
+

img {
  width: 100px;
  height: 100px;
}

.link {
  color: red;
}

@color: red;
h2 {
  color: @color;
}

$color: green;
h3 {
  color: $color;
}

+</span>
<span class="hljs-addition">+.postcss {</span>
<span class="hljs-addition">+  height: 30px;</span>
<span class="hljs-addition">+  width: 60px;</span>
<span class="hljs-addition">+  background-color: orange;</span>
<span class="hljs-addition">+  transform: rotate(25deg);</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+
```

**11.é™æ€èµ„æºå¤„ç†[#](#t7811é™æ€èµ„æºå¤„ç†)**
  - [assets](https://cn.vitejs.dev/guide/assets.html)
  - æœåŠ¡æ—¶å¼•å…¥ä¸€ä¸ªé™æ€èµ„æºä¼šè¿”å›è§£æåçš„å…¬å…±è·¯å¾„**11.1 æ¨¡æ¿å¼•å…¥[#](#t79111-æ¨¡æ¿å¼•å…¥)** src\components\HelloWorld.vue

```diff

+

```

**11.2 JS ä¸­å¼•å…¥[#](#t80112-js-ä¸­å¼•å…¥)** src\components\HelloWorld.vue

```diff

<span class="hljs-addition">+import logoUrl from "@/assets/logo.png"</span>

+

```

**11.3 CSS å¼•å…¥[#](#t81113-css-å¼•å…¥)** src\components\HelloWorld.vue

```diff

+

.logo {
  width: 50px;
  height: 50px;
  background-image: url(@/assets/logo.png);
  background-size: contain;
}

```

**11.4 public ç›®å½•[#](#t82114-public-ç›®å½•)**
  - [public ç›®å½•](https://cn.vitejs.dev/guide/assets.html#the-public-directory)
  - å¦‚æœæœ‰ä»¥ä¸‹éœ€æ±‚
    + è¿™äº›èµ„æºä¸ä¼šè¢«æºç å¼•ç”¨ï¼ˆä¾‹å¦‚ robots.txtï¼‰
    + è¿™äº›èµ„æºå¿…é¡»ä¿æŒåŸæœ‰æ–‡ä»¶åï¼ˆæ²¡æœ‰ç»è¿‡ hashï¼‰
    + é‚£ä¹ˆä½ å¯ä»¥å°†è¯¥èµ„æºæ”¾åœ¨æŒ‡å®šçš„ public ç›®å½•ä¸­ï¼Œå®ƒåº”ä½äºä½ çš„é¡¹ç›®æ ¹ç›®å½•
    + è¯¥ç›®å½•ä¸­çš„èµ„æºåœ¨å¼€å‘æ—¶èƒ½ç›´æ¥é€šè¿‡ / æ ¹è·¯å¾„è®¿é—®åˆ°ï¼Œå¹¶ä¸”æ‰“åŒ…æ—¶ä¼šè¢«å®Œæ•´å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•çš„æ ¹ç›®å½•ä¸‹ index.html

```html
<body>
  <img src="/logo.png" style="width:50px" />
body>
```

**12. mock [#](#t8312-mock)**
  - [vite-plugin-mock](https://github.com/vbenjs/vite-plugin-mock/blob/HEAD/README.zh_CN.md)æä¾›æœ¬åœ°å’Œç”Ÿäº§æ¨¡æ‹ŸæœåŠ¡
  - vite çš„æ•°æ®æ¨¡æ‹Ÿæ’ä»¶ï¼Œæ˜¯åŸºäº vite.js å¼€å‘çš„ã€‚ å¹¶åŒæ—¶æ”¯æŒæœ¬åœ°ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒ**12.1 å®‰è£…[#](#t84121-å®‰è£…)**

```js
pnpm install mockjs  vite-plugin-mock -D
```

**12.2 vite.config.ts [#](#t85122-viteconfigts)** vite.config.ts

```diff
import { defineConfig } from "vite"
import { resolve } from "path"
import vue from "@vitejs/plugin-vue"
+import { viteMockServe } from "vite-plugin-mock"
export default defineConfig({
  resolve: {
    alias: {
      "@": resolve("src")
    }
  },
+ plugins: [vue(), viteMockServe()],
  css: {
    preprocessorOptions: {
      scss: {
        additionalData: '@import "@/styles/theme.scss";'
      },
      less: {
        additionalData: '@import "@/styles/theme.less";'
      }
    }
  }
})

```

**12.3 mock\auth.ts [#](#t86123-mockauthts)** mock\auth.ts

```js
import { MockMethod } from "vite-plugin-mock"
export default [
  {
    url: "/api/currentUser",
    method: "get",
    response: ({ query }) => {
      return {
        code: 0,
        data: "zhufeng"
      }
    }
  }
] as MockMethod[]
```

**13. å°è£…è¯·æ±‚[#](#t8713-å°è£…è¯·æ±‚)**
  - [VueRequest](https://www.attojs.com/)**13.1 å®‰è£…[#](#t88131-å®‰è£…)**

```js
pnpm install axios
```

**13.2 mock\auth.ts [#](#t89132-mockauthts)** mock\auth.ts

```diff
import { MockMethod } from "vite-plugin-mock"
export default [
+ {
+   url: "/api/currentUser",
+   method: "get",
+   response: ({ headers }) => {
+     const { token } = headers
+     return {
+       code: 0,
+       data: token
+     }
+   }
+ },
+ {
+   url: "/api/login",
+   method: "post",
+   response: ({ body }) => {
+     //url body,query headers
+     return {
+       code: 0,
+       data: `${body.username}-token`
+     }
+   }
+ }
] as MockMethod[]
```

**13.3 http.ts [#](#t90133-httpts)** src\api\http.ts

```js
import axios, { AxiosRequestConfig } from "axios"
axios.defaults.baseURL = "/api"
axios.defaults.timeout = 10000
axios.defaults.headers.post["Content-Type"] = "application/json;charset=UTF-8"
axios.interceptors.request.use(
  (config): AxiosRequestConfig => {
    const token = window.sessionStorage.getItem("token")
    if (token) {
      ;(config.headers = config.headers || {}).token = token
    }
    return config
  },
  (error) => {
    throw error
  }
)

axios.interceptors.response.use((res) => {
  return res.data
})

export default axios
```

**13.4 src\api\auth.ts [#](#t91134-srcapiauthts)** src\api\auth.ts

```js
import http from "./http"
import { LoginParams } from "@/typings/auth"
export function login(loginParams: LoginParams) {
  return http.post("/login", loginParams)
}
export function getCurrentUser() {
  return http.get("/currentUser")
}
```

**13.5 auth.ts [#](#t92135-authts)** src\typings\auth.ts

```js
export interface LoginParams {
  username: string
  password: string
}
export interface Response {
  code: number
  data: any
}
```

**13.6 src\request.ts [#](#t93136-srcrequestts)** src\request.ts

```js
import { LoginParams, Response } from "@/typings/auth"
import { login, getCurrentUser } from "@/api/auth"
const loginParams: LoginParams = { username: "zhufeng", password: "123456" }
login(loginParams).then((result) => {
  const token = result.data
  window.sessionStorage.setItem("token", token)
  getCurrentUser().then((result) => {
    console.log(result.data)
  })
})
```

**13.7 main.ts [#](#t94137-maints)** src\main.ts

```diff
import { createApp } from "vue"
import App from "./App.vue"
import "./global.css"
+import "@/request"
const app = createApp(App)
app.mount("#app")

```

**14. çŠ¶æ€ç®¡ç†[#](#t9514-çŠ¶æ€ç®¡ç†)**
  - [devtools](https://devtools.vuejs.org/)
  - [pinia](https://pinia.vuejs.org/introduction.html)
    + æ”¯æŒ Vue3
    + æŠ›å¼ƒ Mutationsï¼Œåªæœ‰ stateã€getters å’Œ actions **14.1 å®‰è£…[#](#t96141-å®‰è£…)**

```js
pnpm install pinia
```

**14.2 src\main.ts [#](#t97142-srcmaints)** src\main.ts

```diff
import { createApp } from "vue"
import App from "./App.vue"
import "./global.css"
import "@/request"
+import { createPinia } from "pinia"
const app = createApp(App)
+app.use(createPinia())
app.mount("#app")
```

**14.3 store\index.ts [#](#t98143-storeindexts)** src\store\index.ts

```js
import { defineStore } from "pinia"

export const useMainStore = defineStore({
  id: "main",
  state: () => ({
    count: 0,
    firstName: "å¼ ",
    lastName: "ä¸‰"
  }),

  getters: {
    name: (state) => state.firstName + state.lastName
  },
  actions: {
    async addAmount(amount: number) {
      this.count += amount
    }
  }
})
```

**14.4 HelloWorld.vue [#](#t99144-helloworldvue)** src\components\HelloWorld.vue

```diff

import { ref } from "vue"
import logoUrl from "../assets/logo.png"
import style from "./HelloWorld.module.css"
<span class="hljs-addition">+import { useMainStore } from "@/store"</span>
<span class="hljs-addition">+import { storeToRefs } from "pinia"</span>
<span class="hljs-addition">+defineProps<{ msg: string }>()</span>
<span class="hljs-addition">+const count = ref(0)</span>
<span class="hljs-addition">+const mainStore = useMainStore()</span>
<span class="hljs-addition">+//const storeCount = mainStore.count</span>
<span class="hljs-addition">+const { count: storeCount } = storeToRefs(mainStore)</span>

<span class="hljs-addition">+const add = () => {</span>
<span class="hljs-addition">+  //é€‚åˆå¤šå­—æ®µæ”¹å˜</span>
<span class="hljs-addition">+  mainStore.$patch({</span>
<span class="hljs-addition">+    name: "arch",</span>
<span class="hljs-addition">+    count: mainStore.count + 1</span>
<span class="hljs-addition">+  })</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+const add2 = () => {</span>
<span class="hljs-addition">+  //é€‚åˆå¤šå­—æ®µæ”¹å˜</span>
<span class="hljs-addition">+  mainStore.$patch((state) => ({</span>
<span class="hljs-addition">+    name: "arch2",</span>
<span class="hljs-addition">+    count: mainStore.count + 2</span>
<span class="hljs-addition">+  }))</span>
<span class="hljs-addition">+}</span>

  {{ msg }}

    count is: {{ count }}

  è¶…é“¾æ¥
  less
  sass

+
+    name:{{ mainStore.name }}
+    count:{{ mainStore.count }}
+    count:{{ storeCount }}
+   mainStore.count++
+   add()
+   add2()
+   mainStore.addAmount(3)
+    name:{{ mainStore.name }}
+

img {
  width: 100px;
  height: 100px;
}

.link {
  color: red;
}

@color: red;
h2 {
  color: @color;
}

$color: green;
h3 {
  color: $color;
}

.postcss {
  height: 30px;
  width: 60px;
  background-color: orange;
  transform: rotate(25deg);
}

```

**15. è·¯ç”±[#](#t10015-è·¯ç”±)**
  - [router](https://next.router.vuejs.org/zh/guide/)**15.1 å®‰è£…[#](#t101151-å®‰è£…)**

```js
pnpm install vue-router
```

**15.2 router\index.ts [#](#t102152-routerindexts)** src\router\index.ts

```js
import { createRouter, createWebHistory, RouteRecordRaw } from "vue-router"

const routes: RouteRecordRaw[] = [
  {
    path: "/",
    name: "home",
    component: () => import("@/pages/HomePage.vue")
  },
  {
    path: "/login",
    name: "login",
    component: () => import("@/pages/LoginPage.vue")
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

export default router
```

**15.3 HomePage.vue [#](#t103153-homepagevue)** src\pages\HomePage.vue

```js

  Home

```

**15.4 LoginPage.vue [#](#t104154-loginpagevue)** src\pages\LoginPage.vue

```js

    ç”¨æˆ·å

```

**15.5 src\main.ts [#](#t105155-srcmaints)** src\main.ts

```js
import { createApp } from "vue"
import App from "./App.vue"
import "./global.css"
import "@/request"
import { createPinia } from "pinia"
+import router from "./router"
const app = createApp(App)
app.use(createPinia())
+app.use(router)
app.mount("#app")

```

**15.6 App.vue [#](#t106156-appvue)** src\App.vue

```diff

import HelloWorld from "@/components/HelloWorld.vue"
import msg from "./msg"

+

```

**16. UI ç»„ä»¶åº“[#](#t10716-ui-ç»„ä»¶åº“)**
  - [NaÃ¯ve UI](https://www.naiveui.com/zh-CN/os-theme)æ˜¯ä¸€ä¸ª Vue 3 ç»„ä»¶åº“
  - [h](https://v3.cn.vuejs.org/api/global-api.html#h)è¿”å›ä¸€ä¸ª"è™šæ‹ŸèŠ‚ç‚¹"ï¼Œé€šå¸¸ç¼©å†™ä¸º VNode,æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štypeï¼Œprops å’Œ children
  - [menu](https://www.naiveui.com/zh-CN/os-theme/components/menu)**16.1 å®‰è£…[#](#t108161-å®‰è£…)**

```js
pnpm install naive-ui vfonts @vicons/ionicons5
```

**16.2 src\App.vue [#](#t109162-srcappvue)**
  - Non-function value encountered for default slot. Prefer function slots for better performance. src\App.vue
  - [slot](https://v3.cn.vuejs.org/api/built-in-components.html#slot)ç”¨äºå…·åæ’æ§½

```diff

import HelloWorld from "@/components/HelloWorld.vue"
import msg from "./msg"
<span class="hljs-addition">+import { h, Component } from "vue"</span>
<span class="hljs-addition">+import { NIcon, NMenu } from "naive-ui"</span>
<span class="hljs-addition">+import type { MenuOption } from "naive-ui"</span>
<span class="hljs-addition">+import { RouterLink } from "vue-router"</span>
<span class="hljs-addition">+import { HomeOutline, LogInOutline } from "@vicons/ionicons5"</span>
<span class="hljs-addition">+const menuOptions: MenuOption[] = [</span>
<span class="hljs-addition">+  {</span>
<span class="hljs-addition">+    label: () =></span>
<span class="hljs-addition">+      h(RouterLink, { to: { name: "home" } }, { default: () => "é¦–é¡µ" }),</span>
<span class="hljs-addition">+    key: "home",</span>
<span class="hljs-addition">+    icon: () => h(NIcon, null, { default: () => h(HomeOutline) }) //å¸¦æœ‰æ’æ§½çš„å¯¹è±¡</span>
<span class="hljs-addition">+  },</span>
<span class="hljs-addition">+  {</span>
<span class="hljs-addition">+    label: () =></span>
<span class="hljs-addition">+      h(RouterLink, { to: { name: "login" } }, { default: () => "ç™»å½•" }),</span>
<span class="hljs-addition">+    key: "login",</span>
<span class="hljs-addition">+    icon: () => h(NIcon, null, { default: () => h(LogInOutline) })</span>
<span class="hljs-addition">+  }</span>
<span class="hljs-addition">+]</span>

+

```

**17. ç¯å¢ƒå˜é‡å’Œæ¨¡å¼[#](#t11017-ç¯å¢ƒå˜é‡å’Œæ¨¡å¼)**
  - Vite åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ import.meta.env å¯¹è±¡ä¸Šæš´éœ²[ç¯å¢ƒå˜é‡](https://vitejs.cn/guide/env-and-mode.html)
    + import.meta.env.MODE: {string} åº”ç”¨è¿è¡Œçš„æ¨¡å¼
    + import.meta.env.BASE_URL: {string} éƒ¨ç½²åº”ç”¨æ—¶çš„åŸºæœ¬ URLã€‚ä»–ç”± base é…ç½®é¡¹å†³å®š
    + import.meta.env.PROD: {boolean} åº”ç”¨æ˜¯å¦è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒ
    + import.meta.env.DEV: {boolean} åº”ç”¨æ˜¯å¦è¿è¡Œåœ¨å¼€å‘ç¯å¢ƒ (æ°¸è¿œä¸ import.meta.env.PROD ç›¸å)**17.1 .env.development [#](#t111171-envdevelopment)**

```js
VITE_APP_WEB_URL = "/dev"
```

**17.2 .env.production [#](#t112172-envproduction)**

```js
VITE_APP_WEB_URL = "/prod"
```

**17.3 src\main.ts [#](#t113173-srcmaints)**

```diff
+console.log(import.meta.env)
```

**17.4 package.json [#](#t114174-packagejson)** package.json

```diff
{
  "scripts": {
+    "build:dev": "vue-tsc --noEmit && vite build --mode development",
+    "build:prod": "vue-tsc --noEmit && vite build --mode production",
  },
}
```](https://v3.cn.vuejs.org/api/sfc-script-setup.html#%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6-script-setup)
